<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>RxAVAnalytics.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">leancloud-typescript-rx-sdk</a> <span class='package-version'>v0.0.9-alpha.1</span></h2><h3>Classes</h3><ul><li><a href="RxAVACL.html">RxAVACL</a><ul class='methods'><li data-type='method'><a href="RxAVACL.html#.RxAVACL">RxAVACL</a></li><li data-type='method'><a href="RxAVACL.html#.RxAVACL">RxAVACL</a></li><li data-type='method'><a href="RxAVACL.html#equals">equals</a></li><li data-type='method'><a href="RxAVACL.html#equals">equals</a></li><li data-type='method'><a href="RxAVACL.html#findWriteAccess">findWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#findWriteAccess">findWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#getPublicReadAccess">getPublicReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#getPublicReadAccess">getPublicReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#getPublicWriteAccess">getPublicWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#getPublicWriteAccess">getPublicWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#getReadAccess">getReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#getReadAccess">getReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#getRoleReadAccess">getRoleReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#getRoleReadAccess">getRoleReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#getRoleWriteAccess">getRoleWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#getRoleWriteAccess">getRoleWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#getWriteAccess">getWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#getWriteAccess">getWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#setPublicReadAccess">setPublicReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#setPublicReadAccess">setPublicReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#setPublicWriteAccess">setPublicWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#setPublicWriteAccess">setPublicWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#setReadAccess">setReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#setReadAccess">setReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#setRoleReadAccess">setRoleReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#setRoleReadAccess">setRoleReadAccess</a></li><li data-type='method'><a href="RxAVACL.html#setRoleWriteAccess">setRoleWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#setRoleWriteAccess">setRoleWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#setWriteAccess">setWriteAccess</a></li><li data-type='method'><a href="RxAVACL.html#setWriteAccess">setWriteAccess</a></li></ul></li><li><a href="RxAVAnalytics.html">RxAVAnalytics</a><ul class='methods'><li data-type='method'><a href="RxAVAnalytics.html#.get">get</a></li><li data-type='method'><a href="RxAVAnalytics.html#.get">get</a></li><li data-type='method'><a href="RxAVAnalytics.html#.init">init</a></li><li data-type='method'><a href="RxAVAnalytics.html#.init">init</a></li><li data-type='method'><a href="RxAVAnalytics.html#.report">report</a></li><li data-type='method'><a href="RxAVAnalytics.html#.report">report</a></li><li data-type='method'><a href="RxAVAnalytics.html#beginEevent">beginEevent</a></li><li data-type='method'><a href="RxAVAnalytics.html#beginEevent">beginEevent</a></li><li data-type='method'><a href="RxAVAnalytics.html#beginPage">beginPage</a></li><li data-type='method'><a href="RxAVAnalytics.html#beginPage">beginPage</a></li><li data-type='method'><a href="RxAVAnalytics.html#closeSesstion">closeSesstion</a></li><li data-type='method'><a href="RxAVAnalytics.html#closeSesstion">closeSesstion</a></li><li data-type='method'><a href="RxAVAnalytics.html#endEvent">endEvent</a></li><li data-type='method'><a href="RxAVAnalytics.html#endEvent">endEvent</a></li><li data-type='method'><a href="RxAVAnalytics.html#endPage">endPage</a></li><li data-type='method'><a href="RxAVAnalytics.html#endPage">endPage</a></li><li data-type='method'><a href="RxAVAnalytics.html#save">save</a></li><li data-type='method'><a href="RxAVAnalytics.html#save">save</a></li><li data-type='method'><a href="RxAVAnalytics.html#send">send</a></li><li data-type='method'><a href="RxAVAnalytics.html#send">send</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackAppOpened">trackAppOpened</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackAppOpened">trackAppOpened</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackAppOpenedWithPush">trackAppOpenedWithPush</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackAppOpenedWithPush">trackAppOpenedWithPush</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackEvent">trackEvent</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackEvent">trackEvent</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackPage">trackPage</a></li><li data-type='method'><a href="RxAVAnalytics.html#trackPage">trackPage</a></li></ul></li><li><a href="RxAVClient.html">RxAVClient</a><ul class='methods'><li data-type='method'><a href="RxAVClient.html#.init">init</a></li><li data-type='method'><a href="RxAVClient.html#.init">init</a></li></ul></li><li><a href="RxAVInstallation.html">RxAVInstallation</a><ul class='methods'><li data-type='method'><a href="RxAVInstallation.html#.current">current</a></li><li data-type='method'><a href="RxAVInstallation.html#.current">current</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.get">get</a></li><li data-type='method'><a href="RxAVInstallation.html#.set">set</a></li><li data-type='method'><a href="RxAVInstallation.html#.set">set</a></li><li data-type='method'><a href="RxAVInstallation.html#fetch">fetch</a></li><li data-type='method'><a href="RxAVInstallation.html#fetchRelation">fetchRelation</a></li><li data-type='method'><a href="RxAVInstallation.html#remove">remove</a></li><li data-type='method'><a href="RxAVInstallation.html#save">save</a></li><li data-type='method'><a href="RxAVInstallation.html#save">save</a></li></ul></li><li><a href="RxAVObject.html">RxAVObject</a><ul class='methods'><li data-type='method'><a href="RxAVObject.html#.createSubclass">createSubclass</a></li><li data-type='method'><a href="RxAVObject.html#.createSubclass">createSubclass</a></li><li data-type='method'><a href="RxAVObject.html#.createWithoutData">createWithoutData</a></li><li data-type='method'><a href="RxAVObject.html#.createWithoutData">createWithoutData</a></li><li data-type='method'><a href="RxAVObject.html#.get">get</a></li><li data-type='method'><a href="RxAVObject.html#.get">get</a></li><li data-type='method'><a href="RxAVObject.html#.get">get</a></li><li data-type='method'><a href="RxAVObject.html#.get">get</a></li><li data-type='method'><a href="RxAVObject.html#.saveAll">saveAll</a></li><li data-type='method'><a href="RxAVObject.html#.saveAll">saveAll</a></li><li data-type='method'><a href="RxAVObject.html#.set">set</a></li><li data-type='method'><a href="RxAVObject.html#.set">set</a></li><li data-type='method'><a href="RxAVObject.html#.set">set</a></li><li data-type='method'><a href="RxAVObject.html#.set">set</a></li><li data-type='method'><a href="RxAVObject.html#fetch">fetch</a></li><li data-type='method'><a href="RxAVObject.html#fetch">fetch</a></li><li data-type='method'><a href="RxAVObject.html#fetchRelation">fetchRelation</a></li><li data-type='method'><a href="RxAVObject.html#fetchRelation">fetchRelation</a></li><li data-type='method'><a href="RxAVObject.html#remove">remove</a></li><li data-type='method'><a href="RxAVObject.html#remove">remove</a></li><li data-type='method'><a href="RxAVObject.html#save">save</a></li><li data-type='method'><a href="RxAVObject.html#save">save</a></li></ul></li><li><a href="RxAVPush.html">RxAVPush</a><ul class='methods'><li data-type='method'><a href="RxAVPush.html#.sendContent">sendContent</a></li><li data-type='method'><a href="RxAVPush.html#.sendContent">sendContent</a></li><li data-type='method'><a href="RxAVPush.html#.sendTo">sendTo</a></li><li data-type='method'><a href="RxAVPush.html#.sendTo">sendTo</a></li><li data-type='method'><a href="RxAVPush.html#send">send</a></li><li data-type='method'><a href="RxAVPush.html#send">send</a></li></ul></li><li><a href="RxAVQuery.html">RxAVQuery</a><ul class='methods'><li data-type='method'><a href="RxAVQuery.html#.or">or</a></li><li data-type='method'><a href="RxAVQuery.html#.or">or</a></li><li data-type='method'><a href="RxAVQuery.html#find">find</a></li><li data-type='method'><a href="RxAVQuery.html#find">find</a></li></ul></li><li><a href="RxAVRole.html">RxAVRole</a><ul class='methods'><li data-type='method'><a href="RxAVRole.html#.createWithName">createWithName</a></li><li data-type='method'><a href="RxAVRole.html#.createWithName">createWithName</a></li><li data-type='method'><a href="RxAVRole.html#.createWithoutData">createWithoutData</a></li><li data-type='method'><a href="RxAVRole.html#.createWithoutData">createWithoutData</a></li><li data-type='method'><a href="RxAVRole.html#.RxAVRole">RxAVRole</a></li><li data-type='method'><a href="RxAVRole.html#.RxAVRole">RxAVRole</a></li><li data-type='method'><a href="RxAVRole.html#deny">deny</a></li><li data-type='method'><a href="RxAVRole.html#deny">deny</a></li><li data-type='method'><a href="RxAVRole.html#fetch">fetch</a></li><li data-type='method'><a href="RxAVRole.html#fetchRelation">fetchRelation</a></li><li data-type='method'><a href="RxAVRole.html#grant">grant</a></li><li data-type='method'><a href="RxAVRole.html#grant">grant</a></li><li data-type='method'><a href="RxAVRole.html#remove">remove</a></li><li data-type='method'><a href="RxAVRole.html#save">save</a></li></ul></li><li><a href="RxAVUser.html">RxAVUser</a><ul class='methods'><li data-type='method'><a href="RxAVUser.html#.current">current</a></li><li data-type='method'><a href="RxAVUser.html#.current">current</a></li><li data-type='method'><a href="RxAVUser.html#.get">get</a></li><li data-type='method'><a href="RxAVUser.html#.get">get</a></li><li data-type='method'><a href="RxAVUser.html#.get">get</a></li><li data-type='method'><a href="RxAVUser.html#.get">get</a></li><li data-type='method'><a href="RxAVUser.html#.get">get</a></li><li data-type='method'><a href="RxAVUser.html#.get">get</a></li><li data-type='method'><a href="RxAVUser.html#.logIn">logIn</a></li><li data-type='method'><a href="RxAVUser.html#.logIn">logIn</a></li><li data-type='method'><a href="RxAVUser.html#.logInByMobilephone">logInByMobilephone</a></li><li data-type='method'><a href="RxAVUser.html#.logInByMobilephone">logInByMobilephone</a></li><li data-type='method'><a href="RxAVUser.html#.logInWithMobilephone">logInWithMobilephone</a></li><li data-type='method'><a href="RxAVUser.html#.logInWithMobilephone">logInWithMobilephone</a></li><li data-type='method'><a href="RxAVUser.html#.sendLogInShortcode">sendLogInShortcode</a></li><li data-type='method'><a href="RxAVUser.html#.sendLogInShortcode">sendLogInShortcode</a></li><li data-type='method'><a href="RxAVUser.html#.sendSignUpShortcode">sendSignUpShortcode</a></li><li data-type='method'><a href="RxAVUser.html#.sendSignUpShortcode">sendSignUpShortcode</a></li><li data-type='method'><a href="RxAVUser.html#.set">set</a></li><li data-type='method'><a href="RxAVUser.html#.set">set</a></li><li data-type='method'><a href="RxAVUser.html#.set">set</a></li><li data-type='method'><a href="RxAVUser.html#.set">set</a></li><li data-type='method'><a href="RxAVUser.html#.set">set</a></li><li data-type='method'><a href="RxAVUser.html#.set">set</a></li><li data-type='method'><a href="RxAVUser.html#.signUpByMobilephone">signUpByMobilephone</a></li><li data-type='method'><a href="RxAVUser.html#.signUpByMobilephone">signUpByMobilephone</a></li><li data-type='method'><a href="RxAVUser.html#activate">activate</a></li><li data-type='method'><a href="RxAVUser.html#activate">activate</a></li><li data-type='method'><a href="RxAVUser.html#create">create</a></li><li data-type='method'><a href="RxAVUser.html#create">create</a></li><li data-type='method'><a href="RxAVUser.html#fetch">fetch</a></li><li data-type='method'><a href="RxAVUser.html#fetchRelation">fetchRelation</a></li><li data-type='method'><a href="RxAVUser.html#fetchRoles">fetchRoles</a></li><li data-type='method'><a href="RxAVUser.html#fetchRoles">fetchRoles</a></li><li data-type='method'><a href="RxAVUser.html#inactive">inactive</a></li><li data-type='method'><a href="RxAVUser.html#inactive">inactive</a></li><li data-type='method'><a href="RxAVUser.html#isAuthenticated">isAuthenticated</a></li><li data-type='method'><a href="RxAVUser.html#isAuthenticated">isAuthenticated</a></li><li data-type='method'><a href="RxAVUser.html#logOut">logOut</a></li><li data-type='method'><a href="RxAVUser.html#logOut">logOut</a></li><li data-type='method'><a href="RxAVUser.html#remove">remove</a></li><li data-type='method'><a href="RxAVUser.html#save">save</a></li><li data-type='method'><a href="RxAVUser.html#signUp">signUp</a></li><li data-type='method'><a href="RxAVUser.html#signUp">signUp</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">RxAVAnalytics.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>"use strict";
var rxjs_1 = require('rxjs');
var SDKPlugins_1 = require('../internal/SDKPlugins');
/**
 * 统计服务的操作接口
 * 当前版本只支持启动发送，也就是每一次启动之后，需要主动调用 report 接口去把上一次统计的数据发送到云端
 * 批量发送和最小时间间隔发送本质上也是拆分成每一个请求一次请求，容易出现发送中断等诸多原因，因此 ts sdk 只打算支持启动发送这一种方式
 *
 * @export
 * @class RxAVAnalytics
 */
var RxAVAnalytics = (function () {
    function RxAVAnalytics(mutableData) {
        if (mutableData &amp;&amp; mutableData != null) {
            this.enable = mutableData.enable;
            this.sessionId = mutableData.sessionId;
            this.policy = mutableData.policy;
            this.parameters = mutableData.parameters;
            this.device = mutableData.device;
            this.events = mutableData.events;
        }
    }
    Object.defineProperty(RxAVAnalytics, "_analyticsController", {
        get: function () {
            return SDKPlugins_1.SDKPlugins.instance.AnalyticsControllerInstance;
        },
        enumerable: true,
        configurable: true
    });
    RxAVAnalytics.setCurrentAnalytics = function (analytics) {
        RxAVAnalytics._CurrentAnalytics = analytics;
    };
    Object.defineProperty(RxAVAnalytics, "_toolController", {
        get: function () {
            return SDKPlugins_1.SDKPlugins.instance.ToolControllerInstance;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(RxAVAnalytics, "currentAnalytics", {
        /**
         * 获取本地对话的统计对象
         *
         * @readonly
         * @static
         *
         * @memberOf RxAVAnalytics
         */
        get: function () {
            return RxAVAnalytics._CurrentAnalytics;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * 初始化统计对象，初始化成功之后可以通过 {RxAVAnalytics.currentAnalytics} 实例对象来记录统计数据
     *
     * @static
     * @returns {Observable&lt;boolean>}
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.init = function () {
        return RxAVAnalytics._analyticsController.getPolicy().flatMap(function (instance) {
            RxAVAnalytics.setCurrentAnalytics(instance);
            return instance.startSesstion();
        }).map(function (started) {
            return started &amp;&amp; RxAVAnalytics.currentAnalytics.enable;
        });
    };
    /**
     * 标记本次应用打开来自于用户手动从图标点开进入
     *
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.trackAppOpened = function () {
        this.trackEvent('!AV!AppOpen', '!AV!AppOpen', null);
    };
    /**
     * 标记本次应用打开来自于用户点击推送通知打开进入
     *
     * @param {any} pushData :{ [key: string]: any } 推送内容包含的参数字典
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.trackAppOpenedWithPush = function (pushData) {
        this.trackEvent('!AV!PushOpen', '!AV!PushOpen', pushData);
    };
    /**
     * 记录一次自定义事件
     *
     * @param {string} name 事件的自定义名称
     * @param {string} [tag] 时间的附加值
     * @param {any} [attributes] 事件的自定义属性字典
     * @returns {string} 自定义事件的 ID
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.trackEvent = function (name, tag, attributes) {
        var newEvent = new RxAVAnalyticEvent();
        newEvent.eventId = "event_" + RxAVAnalytics._toolController.newObjectId();
        newEvent.attributes = attributes;
        newEvent.name = name;
        newEvent.du = 0;
        newEvent.tag = tag;
        newEvent.ts = RxAVAnalytics._toolController.getTimestamp('ms');
        newEvent.sessionId = this.sessionId;
        this.events.event.push(newEvent);
        return newEvent.eventId;
    };
    /**
     * 开始记录一次持续性事件
     *
     * @param {string} name 事件的自定义名称
     * @param {string} [tag] 事件的附加值
     * @param {any} [attributes] 事件的自定义属性字典
     * @returns {string} 返回该事件的 eventId
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.beginEevent = function (name, tag, attributes) {
        return this.trackEvent(name, tag, attributes);
    };
    /**
     * 结束记录一次自定义事件
     *
     * @param {string} eventId  事件的 eventId
     * @param {any} [attributes] 事件的自定义属性字典
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.endEvent = function (eventId, attributes) {
        var begunEvent = this.events.event.find(function (e) {
            return e.eventId == eventId;
        });
        if (begunEvent != null) {
            begunEvent.du = RxAVAnalytics._toolController.getTimestamp('ms') - begunEvent.ts;
            if (attributes &amp;&amp; attributes != null) {
                for (var key in attributes) {
                    begunEvent.attributes[key] = attributes[key];
                }
            }
        }
    };
    /**
     * 记录一个页面的访问时间
     *
     * @param {string} name 页面名称
     * @param {number} duration 访问持续的时间，毫秒
     * @returns {string} 页面的 activitId
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.trackPage = function (name, duration) {
        var newActivity = new RxAVAnalyticActivity();
        newActivity.activityId = "activity_" + RxAVAnalytics._toolController.newObjectId();
        newActivity.ts = RxAVAnalytics._toolController.getTimestamp('ms');
        newActivity.du = duration;
        newActivity.name = name;
        this.events.terminate.activities.push(newActivity);
        return newActivity.activityId;
    };
    /**
     * 开始记录一个页面的持续性访问
     *
     * @param {string} name 页面名称
     * @returns {string} 页面的 activitId
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.beginPage = function (name) {
        return this.trackPage(name, 0);
    };
    /**
     * 结束记录一个页面的持续性访问
     *
     * @param {string} activityId 页面的 activitId
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.endPage = function (activityId) {
        var begunPage = this.events.terminate.activities.find(function (a) {
            return a.activityId == activityId;
        });
        if (begunPage != null) {
            begunPage.du = RxAVAnalytics._toolController.getTimestamp('ms') - begunPage.ts;
        }
    };
    /**
     *  如果实现了本地缓存的接口，那么可以将本地统计数据保存在本地的缓存内
     *
     * @returns {Observable&lt;boolean>} 发送结果，可能因为并没有实现本地缓存的接口而导致失败
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.save = function () {
        this.closeSesstion();
        if (SDKPlugins_1.SDKPlugins.instance.hasStorage) {
            return SDKPlugins_1.SDKPlugins.instance.LocalStorageControllerInstance.set(RxAVAnalytics.analyticsCacheKey, this).map(function (iStorage) {
                return iStorage != null;
            });
        }
        else
            return rxjs_1.Observable.from([false]);
    };
    /**
     * 主动发送本次统计数据
     *
     * @returns {Observable&lt;boolean>} 发送结果，可能因为数据格式不正确而造成服务端拒收
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.send = function () {
        if (!this.enable) {
            return rxjs_1.Observable.from([false]);
        }
        return RxAVAnalytics._analyticsController.send(this, null);
    };
    /**
     *
     * 停止 session
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.prototype.closeSesstion = function () {
        this.events.terminate.duration = RxAVAnalytics._toolController.getTimestamp('ms') - this.events.launch.date;
    };
    RxAVAnalytics.prototype.startSesstion = function () {
        var _this = this;
        return rxjs_1.Observable.fromPromise(RxAVAnalytics._analyticsController.deviceProvider.getDevice()).map(function (deviceInfo) {
            _this.device = deviceInfo;
            _this.resetData();
            return true;
        });
    };
    RxAVAnalytics.prototype.resetData = function () {
        this.sessionId = "session_" + RxAVAnalytics._toolController.newObjectId();
        this.events = {
            event: [],
            launch: new RxAVAnalyticLaunch(this.sessionId),
            terminate: new RxAVAnalyticTerminate(this.sessionId)
        };
    };
    /**
     * 将上一次对话的统计数据报告给服务端
     *
     * @static
     *
     * @memberOf RxAVAnalytics
     */
    RxAVAnalytics.report = function () {
        return RxAVAnalytics.restore().flatMap(function (data) {
            return data.send();
        });
    };
    RxAVAnalytics.restore = function () {
        if (SDKPlugins_1.SDKPlugins.instance.hasStorage) {
            return SDKPlugins_1.SDKPlugins.instance.LocalStorageControllerInstance.get(RxAVAnalytics.analyticsCacheKey).map(function (cacheData) {
                var cacheModel = new RxAVAnalytics(cacheData);
                return cacheModel;
            });
        }
    };
    RxAVAnalytics.prototype.encodeForSendServer = function () {
        return {
            device: this.device,
            events: this.events
        };
    };
    RxAVAnalytics.analyticsCacheKey = 'LastAnalyticsData';
    return RxAVAnalytics;
}());
exports.RxAVAnalytics = RxAVAnalytics;
var RxAVAnalyticDevice = (function () {
    function RxAVAnalyticDevice() {
    }
    return RxAVAnalyticDevice;
}());
exports.RxAVAnalyticDevice = RxAVAnalyticDevice;
var RxAVAnalyticLaunch = (function () {
    function RxAVAnalyticLaunch(sessionId) {
        this.date = RxAVAnalytics._toolController.getTimestamp('ms');
        this.sessionId = sessionId;
    }
    return RxAVAnalyticLaunch;
}());
exports.RxAVAnalyticLaunch = RxAVAnalyticLaunch;
var RxAVAnalyticTerminate = (function () {
    function RxAVAnalyticTerminate(sessionId) {
        this.activities = [];
        this.sessionId = sessionId;
    }
    return RxAVAnalyticTerminate;
}());
exports.RxAVAnalyticTerminate = RxAVAnalyticTerminate;
var RxAVAnalyticActivity = (function () {
    function RxAVAnalyticActivity() {
    }
    return RxAVAnalyticActivity;
}());
exports.RxAVAnalyticActivity = RxAVAnalyticActivity;
var RxAVAnalyticEvent = (function () {
    function RxAVAnalyticEvent() {
    }
    return RxAVAnalyticEvent;
}());
exports.RxAVAnalyticEvent = RxAVAnalyticEvent;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Wed Mar 01 2017 16:30:53 GMT+0800 (CST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
